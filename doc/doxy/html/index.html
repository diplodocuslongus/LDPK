<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.7"/>
<title>ldpk: LDPK - The Lens Distortion Plugin Kit</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() {
    if ($('.searchresults').length > 0) { searchBox.DOMSearchField().focus(); }
  });
</script>
<link rel="search" href="search-opensearch.php?v=opensearch.xml" type="application/opensearchdescription+xml" title="ldpk"/>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">ldpk
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.7 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li class="current"><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
          <div class="left">
            <form id="FSearchBox" action="search.php" method="get">
              <img id="MSearchSelect" src="search/mag.png" alt=""/>
              <input type="text" id="MSearchField" name="query" value="Search" size="20" accesskey="S" 
                     onfocus="searchBox.OnSearchFieldFocus(true)" 
                     onblur="searchBox.OnSearchFieldFocus(false)"/>
            </form>
          </div><div class="right"></div>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">LDPK - The Lens Distortion Plugin Kit </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h1><a class="anchor" id="About"></a>
About</h1>
<p>The current version of LDPK is 1.9.2 The <a href="../../tex/ldpk.pdf">PDF-document</a> contains some information on the underlying mathematics of the built-in lens distortion models.</p>
<h1><a class="anchor" id="Files"></a>
Files</h1>
<p>A list of files can be found <a href="../../misc/list_of_files.html">here</a>. We left out some of the less interesting files in the documentation directories.</p>
<h1><a class="anchor" id="Binaries"></a>
Binaries</h1>
<p>As of version 1.6 of the $LDPK, only 64-bit architectures are supported. For each of the supported platforms there is a simple program in <code style="color:#a00">$LDPK/bin</code> which you can use in order to check, if your plugin is accepted by the executable. They have been compiled on the same platforms using the same compiler as 3DE4. These binaries are:</p><ul>
<li><code>tde4_plugin_info.linux</code></li>
<li><code>tde4_plugin_info.osx</code></li>
</ul>
<h1><a class="anchor" id="Python"></a>
Python</h1>
<p>As of version 1.6 of the LDPK there are python bindings for the five built-in lens distortion models (OSX, Linux):</p><ul>
<li><code>$LDPK/compiled/ldpk/&lt;arch&gt;/python/lens_distortion_plugins.so</code></li>
</ul>
<p>In <code style="color:#a00">$LDPK/source</code> there is a source <code>tde4_lens_distortion_plugins.module.C</code> for building python bindings. If the pre-compiled version does not meet your requirements you can compile them yourself. In order to do this please run the appropriate script make_python_bindings.&lt;arch&gt;.csh in <code style="color:#a00">$LDPK/script</code>. The make-script will create a file named <code>$LDPK/python/&lt;arch&gt;/lens_distortion_plugins.so</code>. If you move this to an appropriate location, you can import this in python e.g. with</p>
<div class="fragment"><div class="line"><span class="keyword">import</span> lens_distortion_plugins as ldp</div>
</div><!-- fragment --><p>Please have a look at the sample programs in <code style="color:#a00">$LDPK/python</code> and read <a href="../../sphinx/build/html/index.html">this document</a>.</p>
<h1><a class="anchor" id="Nuke"></a>
Nuke</h1>
<p>As of version 1.7 of the LDPK there are compiled plugins based on the five built-in lens distortion models for various versions of Nuke (from <a href="http://www.thefoundry.co.uk/products/nuke-product-family/nuke/">The Foundry</a>) In the documentation and in 3DE4 we will refer to these nodes as the <span style="font-weight:bold;color:#a00">LD_3DE4 Lens Distortion Nodes</span> or briefly the LD_3DE4 nodes.</p><ul>
<li><code>$LDPK/compiled/nuke/&lt;arch&gt;/Nuke&lt;X.Y&gt;/LD_3DE4_Anamorphic_Degree_6.[so,dylib,dll]</code></li>
<li><code>$LDPK/compiled/nuke/&lt;arch&gt;/Nuke&lt;X.Y&gt;/LD_3DE4_Anamorphic_Standard_Degree_4.[so,dylib,dll]</code></li>
<li><code>$LDPK/compiled/nuke/&lt;arch&gt;/Nuke&lt;X.Y&gt;/LD_3DE4_Radial_Fisheye_Degree_8.[so,dylib,dll]</code></li>
<li><code>$LDPK/compiled/nuke/&lt;arch&gt;/Nuke&lt;X.Y&gt;/LD_3DE4_Radial_Standard_Degree_4.[so,dylib,dll]</code></li>
<li><code>$LDPK/compiled/nuke/&lt;arch&gt;/Nuke&lt;X.Y&gt;/LD_3DE_Classic_LD_Model.[so,dylib,dll]</code></li>
</ul>
<p>They are fairly easy to install, you simply copy them to your Nuke plugin directory. Currently, Nuke versions 6.2, 6.3, 7.0, 8.0, 9.0 and 10.0 on Linux and OSX are supported (Windows: 6.3, 7.0, 8.0, 9.0, 10.0). If you need to compile the Nuke plugins yourself, please have a look at the scripts <code>make_nuke_nodes.&lt;arch&gt;.csh</code> in <code style="color:#a00">$LDPK/script</code>. Please insert the paths to your Nuke installation directory and consult The Foundry's documentation for the appropriate compiler version. If you miss support for any version of Nuke here (but not prior to 6.2) please let us know, we will add this if possible. </p><div class="image">
<img src="menu_nuke_ld_3de4.png" alt="menu_nuke_ld_3de4.png"/>
</div>
<p> We have modified <code style="color:#a00">$NUKE/plugins/menu.py</code> as in the following code snippet, but you may handle this according to your needs. Also, it might be helpful to consult Nuke's documentation about adding commands to the GUI. </p><div class="fragment"><div class="line">nuke.menu(<span class="stringliteral">&quot;Nodes&quot;</span>).addCommand(<span class="stringliteral">&quot;3DE4/LD_3DE4_Anamorphic_Standard_Degree_4&quot;</span>, <span class="stringliteral">&quot;nuke.createNode(&#39;LD_3DE4_Anamorphic_Standard_Degree_4&#39;)&quot;</span>)</div>
<div class="line">nuke.menu(<span class="stringliteral">&quot;Nodes&quot;</span>).addCommand(<span class="stringliteral">&quot;3DE4/LD_3DE4_Anamorphic_Degree_6&quot;</span>, <span class="stringliteral">&quot;nuke.createNode(&#39;LD_3DE4_Anamorphic_Degree_6&#39;)&quot;</span>)</div>
<div class="line">nuke.menu(<span class="stringliteral">&quot;Nodes&quot;</span>).addCommand(<span class="stringliteral">&quot;3DE4/LD_3DE4_Radial_Standard_Degree_4&quot;</span>, <span class="stringliteral">&quot;nuke.createNode(&#39;LD_3DE4_Radial_Standard_Degree_4&#39;)&quot;</span>)</div>
<div class="line">nuke.menu(<span class="stringliteral">&quot;Nodes&quot;</span>).addCommand(<span class="stringliteral">&quot;3DE4/LD_3DE4_Radial_Fisheye_Degree_8&quot;</span>, <span class="stringliteral">&quot;nuke.createNode(&#39;LD_3DE4_Radial_Fisheye_Degree_8&#39;)&quot;</span>)</div>
<div class="line">nuke.menu(<span class="stringliteral">&quot;Nodes&quot;</span>).addCommand(<span class="stringliteral">&quot;3DE4/LD_3DE_Classic_LD_Model&quot;</span>, <span class="stringliteral">&quot;nuke.createNode(&#39;LD_3DE_Classic_LD_Model&#39;)&quot;</span>)</div>
</div><!-- fragment --><p> In <code style="color:#a00">$LDPK/3de4/python</code> you will find an export script named </p><center> <code>export_nuke_LD_3DE4_Lens_Distortion_Node.py</code> </center><p> which you run from within 3DE4. In order to do this please copy it into your 3DE4 installation, at <code style="color:#a00">$TDE4/sys_data/py_scripts/</code>. In 3DE4's GUI the script appears in <code>Main Window -&gt; 3DE4 -&gt; File -&gt; Export</code></p>
<div class="image">
<img src="menu_3de4_file_export.png" alt="menu_3de4_file_export.png"/>
</div>
<p>In addition to the seven built-in parameters and the model-specific parameters the plugins have four parameters which allow to specify the field of view as defined in 3DE4:</p><ul>
<li>"fov left [unit coord]"</li>
<li>"fov bottom [unit coord]"</li>
<li>"fov right [unit coord]"</li>
<li>"fov top [unit coord]"</li>
</ul>
<p>Default values are 0,0,1,1. By definition, the field of view in 3DE4 corresponds to the area represented by filmback width and height. In contrast to previous solutions, field of view is now taken into account.</p>
<h1><a class="anchor" id="Classes"></a>
Classes</h1>
<p>The LDPK contains various classes. It is <b>important to know</b> that most of them are <b>not required</b> in order to develop a plugin. In the following we will classify all classes according to their importance. Note that you only need one API class in order to develop a plugin with at least basic functionality.</p><ul>
<li><b>Important</b><ul>
<li><a class="el" href="classtde4__ld__plugin.html" title="Lens Distortion Plugin Base Class. ">tde4_ld_plugin</a> - This is the base class of all lens distortion plugins for 3DE4. Historically, this is declared in the global namespace.</li>
</ul>
</li>
<li><b>Useful</b><ul>
<li><a class="el" href="classldpk_1_1ldp__builtin.html" title="This class handles the built-in parameter and the lookup table. You may find it useful for your own d...">ldpk::ldp_builtin</a> - This class may serve as a base class for your distortion model. It manages the seven built-in parameters and the lookup-table that might be helpful for calculating the inverse distortion function. It also contains the mutex used in the derived classes and methods for mapping between coordinate systems. In the 3DE4 plugin classes <a class="el" href="classtde4__ldp__anamorphic__deg__6.html" title="Plugin class for anamorphic distortion. Does not compensate for decentering. Parameters can be calcul...">tde4_ldp_anamorphic_deg_6</a> and <a class="el" href="classtde4__ldp__anamorphic__deg__4__rotate__squeeze__xy.html">tde4_ldp_anamorphic_deg_4_rotate_squeeze_xy</a> you see, how the lookup-table is used (see methods distort()).</li>
</ul>
</li>
<li><b>Nice to have</b> - Once you have developed a plugin you probably want to test it. These classes will help you to do so, but alternatively you can also copy your plugin to 3DE4's plugin directory and test it directly with 3DE4.<ul>
<li><a class="el" href="classldpk_1_1plugin__loader.html" title="A simple plugin loader for testing and debugging purposes. ">ldpk::plugin_loader</a> - Load a plugin</li>
<li><a class="el" href="classldpk_1_1model__parser.html" title="A class for reading distortion model parameters from a stream. Might be helpful for testing...">ldpk::model_parser</a> - A convenient way to set parameters in the plugin from a data stream.</li>
<li><a class="el" href="classldpk_1_1table__generator.html" title="Generate table data from plugin for visualization. ">ldpk::table_generator</a> - Visualization with gnuplot</li>
</ul>
</li>
<li><b>Self consistency</b> - Some of our classes require two-dimensional vector and matrix classes. Here are two classes which do the job, but you might replace them by math classes used in your organization.<ul>
<li><a class="el" href="classldpk_1_1vec2d.html" title="A class for two-dimensional double-valued vectors We have added this class and ldpk::mat2d in order t...">ldpk::vec2d</a></li>
<li><a class="el" href="classldpk_1_1mat2d.html" title="A class for double-valued 2x2-matrices. The matrix class for ldpk::vec2d. ">ldpk::mat2d</a></li>
</ul>
</li>
<li><b>3DE4-built-in lens distortin models</b><ul>
<li><a class="el" href="classtde4__ldp__radial__decentered__deg__4__cylindric.html" title="Plugin class for radial distortion with decentering and optional compensation for beam-splitter artef...">tde4_ldp_radial_decentered_deg_4_cylindric</a> - The standard for non-anamorphic lenses. Compensates for displaced lenses and optionally for beam splitter artefacts in beam splitter based stereo rigs.</li>
<li><a class="el" href="classtde4__ldp__radial__deg__8.html" title="Plugin class for radial distortion. Does not compensate for decentering. Parameters can be calculated...">tde4_ldp_radial_deg_8</a> - A high degree radial distortion model which combines an degree-8 radial model with fisheye correction.</li>
<li><a class="el" href="classtde4__ldp__anamorphic__deg__4__rotate__squeeze__xy.html">tde4_ldp_anamorphic_deg_4_rotate_squeeze_xy</a> - This model should be the standard for anamorphic lenses. It has a degree-4 anamorphic model and compensates for unprecisely mounted anamorphic lenses.</li>
<li><a class="el" href="classtde4__ldp__anamorphic__deg__6.html" title="Plugin class for anamorphic distortion. Does not compensate for decentering. Parameters can be calcul...">tde4_ldp_anamorphic_deg_6</a> - A simple degree-6 anamorphic model.</li>
<li><a class="el" href="classtde4__ldp__classic__3de__mixed.html" title="Degree-2 anamorphic and degree-4 radial mixed model. Does not compensate for decentering. Parameters can be calculated by 3DE&#39;s Matrix Tool. ">tde4_ldp_classic_3de_mixed</a> - The classic mixed degree-2 / degree-4 model. Usually, radial-decentered-deg-4-cylincdric should be used instead of this one. We keep this in the release for compatibility.</li>
</ul>
</li>
<li><b>Baseclass for Nuke plugins</b><ul>
<li><a class="el" href="classnuke__ld__3de4__base.html" title="The baseclass for Nuke plugins around LDPK-based lens distortion models. In order to implement a Nuke...">nuke_ld_3de4_base</a> - The baseclass for developing Nuke plugins from LDPK lens distortion classes. In <code style="color:#a00">$LDPK/source</code> you will find the sources for building Nuke plugins around 3DE4 lens distortion plugins. Take any of these as a starting point for your own Nuke plugin, but note that we do not directly derive from <b><a class="el" href="classtde4__ld__plugin.html" title="Lens Distortion Plugin Base Class. ">tde4_ld_plugin</a></b> but from <b><a class="el" href="classldpk_1_1ldp__builtin.html" title="This class handles the built-in parameter and the lookup table. You may find it useful for your own d...">ldpk::ldp_builtin</a></b>, which has certain properties we need for all our lens distortion models. </li>
</ul>
</li>
</ul>
</div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Fri Apr 29 2016 16:34:30 for ldpk by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.7
</small></address>
</body>
</html>
